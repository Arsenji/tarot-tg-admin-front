# Настройка OpenAI API для анализа раскладов

## Шаг 1: Получение API ключа

1. Перейдите на [OpenAI Platform](https://platform.openai.com/)
2. Войдите в свой аккаунт или создайте новый
3. Перейдите в раздел "API Keys"
4. Нажмите "Create new secret key"
5. Скопируйте полученный ключ

## Шаг 2: Настройка переменной окружения

Откройте файл `backend/.env` и замените:

```
OPENAI_API_KEY=your_openai_api_key_here
```

на:

```
OPENAI_API_KEY=sk-your-actual-api-key-here
```

## Шаг 3: Перезапуск сервера

После настройки API ключа перезапустите backend:

```bash
cd backend
npm run dev
```

## Функциональность

После настройки API ключа:

- **Расклад на 3 карты** будет использовать OpenAI для анализа
- **AI интерпретация** будет учитывать:
  - Вопрос пользователя
  - Выпавшие карты и их значения
  - Позиции карт (Прошлое/Настоящее/Будущее)
- **Fallback** к стандартной интерпретации при ошибках API
- **Индикатор загрузки** во время анализа AI

## Ограничения

- OpenAI интерпретация доступна только для **подписчиков**
- Используется модель `gpt-4o-mini` для экономии средств
- Максимум 1000 токенов на ответ
- Температура 0.7 для баланса креативности и точности

## Тестирование

1. Убедитесь, что у вас есть активная подписка
2. Перейдите в раздел "Три карты"
3. Введите вопрос и выберите категорию
4. Нажмите "Начать расклад"
5. Дождитесь появления индикатора "AI анализирует ваш расклад..."
6. Получите персонализированную интерпретацию
