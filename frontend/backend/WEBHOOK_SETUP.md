# Настройка Webhook для Юкассы

## 1. Получение URL для webhook

После развертывания на сервере ваш webhook URL будет:
```
https://yourdomain.com/api/yookassa/webhook
```

## 2. Настройка в личном кабинете Юкассы

1. Зайдите в [личный кабинет Юкассы](https://yookassa.ru/my)
2. Перейдите в раздел "Настройки" → "Webhook"
3. Нажмите "Добавить webhook"
4. Укажите URL: `https://yourdomain.com/api/yookassa/webhook`
5. Выберите события:
   - ✅ `payment.succeeded` (успешная оплата)
   - ✅ `payment.canceled` (отмена оплаты)
   - ✅ `payment.waiting_for_capture` (ожидание подтверждения)

## 3. Проверка webhook

После настройки Юкасса отправит тестовое уведомление. Проверьте логи:
```bash
tail -f backend/logs/app.log | grep -i webhook
```

## 4. Тестирование

### Тестовые карты Юкассы:
- **Успешная оплата**: 5555 5555 5555 4444
- **Отклоненная оплата**: 5555 5555 5555 4477
- **Недостаточно средств**: 5555 5555 5555 4455

### Тестовые данные:
- **Срок действия**: любая будущая дата
- **CVC**: любые 3 цифры
- **Имя**: любое

## 5. Мониторинг

Проверяйте статус webhook в личном кабинете Юкассы и логи приложения.

## 6. Безопасность

- Webhook должен быть доступен только по HTTPS
- Проверяйте подпись уведомлений (реализовано в коде)
- Логируйте все входящие уведомления
